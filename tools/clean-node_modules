#!/usr/bin/env sh

ProjectDir="$(cd "$(dirname "$0")/.." && pwd)"

. "$ProjectDir/tools/env.sh"
. "$ProjectDir/tools/env-styles.sh"

if test $# -eq 0; then
        set -- "$ProjectDir/std-"*
fi

for pkg; do
        if test ! -e "$pkg"; then
                continue
        fi
        echo "Cleaning ${YellowStyle}$(basename "$pkg")/{node_modules,package-lock.json}${ResetStyle}..."
        printf -- "${GrayStyle}"
        rm -rf "$pkg/node_modules" || true
        rm -f "$pkg/package-lock.json" || true
        printf -- "${ResetStyle}"
done

echo "${GreenStyle}done${ResetStyle}"